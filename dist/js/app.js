"use strict";angular.module("baristaMatic",["baristaMatic.templates"]);"use strict";angular.module("baristaMatic").directive("coffeeItem",coffeeItem);function coffeeItem(){return{restrict:"E",replace:true,scope:{coffee:"=",onClick:"&"},templateUrl:"app/js/coffeeItem.html",link:function(e,n,t){var a=n[0].offsetWidth;n.css("height",a+"px")}}}"use strict";angular.module("baristaMatic").directive("coffeeMenu",coffeeMenu).controller("CoffeeMenuCtrl",CoffeeMenuCtrl);function coffeeMenu(){return{restrict:"E",templateUrl:"app/js/coffeeMenu.html",controller:"CoffeeMenuCtrl",controllerAs:"vm",scope:{}}}CoffeeMenuCtrl.$inject=["$rootScope","$scope","$timeout","inventoryService"];function CoffeeMenuCtrl(e,n,t,a){var r=this;r.orderStatus="";r.orderDrink=o;i();function i(){c();n.$on("pantry:updated",c)}function c(){r.menuItems=a.getMenuItems()}function o(e){if(angular.isNumber(e)){e=r.menuItems[e-1]}else if(angular.isObject(e)){r.selectedMenuItem=r.menuItems.indexOf(e)+1}if(e.isAvailable){m(e)}else{r.orderStatus="Out of stock: "+e.menuLabel}}function m(n){r.orderStatus="Dispensing: "+n.menuLabel;t(function(){r.orderStatus="";r.selectedMenuItem=null;e.$broadcast("menuItem:ordered",{orderedItem:n});r.menuItems=a.getMenuItems()},1e3)}}"use strict";angular.module("baristaMatic").factory("inventoryService",inventoryService);inventoryService.$inject=["$filter"];function inventoryService(e){var n={},t={};var a=[{menuItem:"coffee",image:"images/coffee.png",ingredients:[{name:"coffee",key:1,quantity:3},{name:"sugar",key:2,quantity:1},{name:"cream",key:3,quantity:1}]},{menuItem:"decaf coffee",image:"images/coffee.png",ingredients:[{name:"decaf coffee",key:4,quantity:3},{name:"sugar",key:2,quantity:1},{name:"cream",key:3,quantity:1}]},{menuItem:"caffe latte",image:"images/latte.png",ingredients:[{name:"espresso",key:7,quantity:2},{name:"steamed milk",key:5,quantity:1}]},{menuItem:"caffe americano",image:"images/americano.png",ingredients:[{name:"espresso",key:7,quantity:3}]},{menuItem:"caffe mocha",image:"images/mocha.png",ingredients:[{name:"espresso",key:7,quantity:1},{name:"cocoa",key:8,quantity:1},{name:"steamed milk",key:5,quantity:1},{name:"whipped cream",key:9,quantity:1}]},{menuItem:"cappuccino",image:"images/cappuccino.png",ingredients:[{name:"espresso",key:7,quantity:2},{name:"steamed milk",key:5,quantity:1},{name:"foamed milk",key:6,quantity:1}]}];var r=[{name:"coffee",key:1,price:.75},{name:"decaf coffee",key:2,price:.75},{name:"sugar",key:3,price:.25},{name:"cream",key:4,price:.25},{name:"steamed milk",key:5,price:.35},{name:"foamed milk",key:6,price:.35},{name:"espresso",key:7,price:1.1},{name:"cocoa",key:8,price:.9},{name:"whipped cream",key:9,price:1}];i();function i(){c();y();o()}return{getIngredientPrices:m,getMenuItems:s,getPantryItems:u,removeIngredientsFromPantry:p,restockPantry:y};function c(){angular.forEach(r,function(e){n[e.name]={}})}function o(){angular.forEach(r,function(e){t[e.name]=e.price})}function m(){return r}function s(){var e=[],n=["coffee","decaf coffee","caffe latte","caffe americano","caffe mocha","cappuccino"];n.sort();angular.forEach(n,function(n){var t=f(n);e.push({menuLabel:n,imageUrl:t.image,isAvailable:d(t),formattedPrice:l(t)})});return e}function u(){var e=[],t=[];angular.forEach(n,function(e,n){t.push(n)});t.sort();angular.forEach(t,function(t){e.push({name:t,quantity:n[t].quantity})});return e}function l(n){var a=0;angular.forEach(n.ingredients,function(e){a+=t[e.name]*e.quantity});a=a.toFixed(2);return e("currency")(a,"$",2)}function f(e){var n=[];for(var t=0;t<a.length;t++){if(a[t].menuItem.toLowerCase()===e){n=a[t];break}}return n}function d(e){var t=true;for(var a=0;a<e.ingredients.length;a++){var r=e.ingredients[a],i=n[r.name];if(i.quantity<r.quantity){t=false;break}}return t}function p(e){var t=f(e);angular.forEach(t.ingredients,function(e){var t=n[e.name];t.quantity-=e.quantity})}function y(){angular.forEach(n,function(e){e.quantity=10})}}"use strict";angular.module("baristaMatic").directive("pantry",pantry).controller("PantryCtrl",PantryCtrl);function pantry(){return{restrict:"E",scope:{},templateUrl:"app/js/pantry.html",controller:"PantryCtrl",controllerAs:"vm"}}PantryCtrl.$inject=["$rootScope","$scope","inventoryService"];function PantryCtrl(e,n,t){var a=this;a.restock=i;r();function r(){c();n.$on("menuItem:ordered",c)}function i(){t.restockPantry();c();e.$broadcast("pantry:updated")}function c(e,n){if(n){t.removeIngredientsFromPantry(n.orderedItem.menuLabel)}a.pantry=t.getPantryItems()}}angular.module("baristaMatic.templates",[]).run(["$templateCache",function(e){e.put("app/js/coffeeItem.html",'<button type="button" class="btn btn-default btn-primary text-center menu-item-btn"\n'+'        ng-click="onClick(coffee)"\n'+'        ng-disabled="!coffee.isAvailable">\n'+'  <div class="menu-item-name">{{coffee.menuLabel}}</div>\n'+'  <img class="menu-item-img" ng-src="{{coffee.imageUrl}}" />\n'+'  <div class="menu-item-price">{{coffee.formattedPrice}}</div>\n'+"</button>\n"+"");e.put("app/js/coffeeMenu.html",'<h2 class="subtitle">Menu</h2>\n'+"\n"+'<div class="row col-xs-12 menu-selection-container">\n'+'  <form name="vm.menuSelectionForm" class="form-inline text-center">\n'+'    <div class="form-group">\n'+'      <label for="coffeeSelection">Enter selection:</label>\n'+'      <input type="number" class="form-control inline"\n'+'             id="coffee-menu-selection" name="coffeeSelection"\n'+'             ng-model="vm.selectedMenuItem"\n'+'             ng-pattern="/^[1-6]{1}$/"\n'+'             min="1"\n'+'             max="6" />\n'+'      <button type="submit" class="btn btn-default btn-primary"\n'+'              ng-disabled="!vm.selectedMenuItem"\n'+'              ng-click="vm.orderDrink(vm.selectedMenuItem)">Order</button>\n'+"    </div>\n"+'    <div class="error"\n'+'          ng-show="vm.menuSelectionForm.coffeeSelection.$invalid || vm.selectedItemError">\n'+"      Invalid selection\n"+"    </div>\n"+'    <div class="order-status">{{vm.orderStatus}}</div>\n'+"  </form>\n"+"</div>\n"+"\n"+'<div class="row">\n'+'  <div class="inline col-xs-6 col-sm-4"\n'+'       ng-repeat="menuItem in vm.menuItems">\n'+'    <span class="selection-number" ng-show="menuItem.isAvailable">{{$index + 1}}</span>\n'+'    <coffee-item coffee="menuItem" on-click="vm.orderDrink(menuItem)"></coffee-item>\n'+"  </div>\n"+"</div>\n"+"");e.put("app/js/pantry.html",'<div class="row col-xs-12 text-center">\n'+"  <h2>Inventory</h2>\n"+"</div>\n"+"\n"+'<div class="row pantry-table-container">\n'+'  <div class="col-xs-12 pantry-table ">\n'+'    <div class="row pantry-table-header-row">\n'+'      <div class="col-xs-7 pantry-ingredient">Ingredient</div>\n'+'      <div class="col-xs-5 pantry-quantity">Remaining</div>\n'+"    </div>\n"+'    <div ng-repeat="pantryItem in vm.pantry" class="row pantry-table-data-row">\n'+'      <div class="col-xs-7 pantry-ingredient">\n'+"        {{pantryItem.name}}\n"+"      </div>\n"+'      <div class="col-xs-5 pantry-quantity">\n'+"        {{pantryItem.quantity}}\n"+"      </div>\n"+"    </div>\n"+"  </div>\n"+"</div>\n"+"\n"+'<div class="row col-xs-12 text-center">\n'+'  <button type="button" class="btn btn-default btn-primary restock-btn"\n'+'          ng-click="vm.restock()">Restock Ingredients</button>\n'+"</div>\n"+"")}]);